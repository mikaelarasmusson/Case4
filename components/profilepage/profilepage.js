"use strict"

function renderProfilePageContainer (parentId) {
    const parent = document.getElementById(parentId);

    const container = document.createElement("div");
    container.id = "profilePageContainer";
    parent.append(container);

    // Rendera allt h√§r
    renderProfilePageBackArrow(container.id);
    renderMyProfileContent(container.id);
}

function renderProfilePageBackArrow (parentId) {
    const parent = document.getElementById(parentId);

    const profileArrowTitleContainer = document.createElement("div");
    profileArrowTitleContainer.id = "profileArrowTitleContainer";
    
    profileArrowTitleContainer.innerHTML = `
    <button id="backArrow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="20" viewBox="0 0 24 20" fill="none">
            <path d="M9 19.6567L0 10L9 0.343346L11.1 2.67704L5.775 8.39056H24V11.6094H5.775L11.1 17.323L9 19.6567Z" fill="white"/>
        </svg>
    </button>
    <h2 id="profileTitle">My Profile</h2>
    `;

    parent.appendChild(profileArrowTitleContainer);

    document.getElementById("backArrow").addEventListener("click", () => {
        document.getElementById("profilePageContainer").remove();
        renderLandingpageWrapper("wrapper");
    });
}

function renderMyProfileContent (parentId) {
    const parent = document.getElementById(parentId);

    const myProfileContentContainer = document.createElement("div");
    myProfileContentContainer.id = "myProfileContentContainer";

    let userInfo = State.get("users");

    myProfileContentContainer.innerHTML = `
    <div id="profileInfoPic">
        <h2 id="myProfileTitle">My Profile</h2>
        <img id="myProfilePic" src="${userInfo.profileImg}">
        <p id="userName">${userInfo.username}</p>
        <div id="starAndScore">
            <svg id="starIcon" xmlns="http://www.w3.org/2000/svg" width="19" height="20" viewBox="0 0 19 20" fill="none">
                <path d="M18.9854 8.10816C19.0803 7.6103 18.7006 7.01288 18.2259 7.01288L12.8151 6.21631L10.347 1.03863C10.2521 0.839491 10.1572 0.73992 9.96731 0.640349C9.49268 0.341637 8.92312 0.540778 8.63834 1.03863L6.26517 6.21631L0.854341 7.01288C0.569561 7.01288 0.379707 7.11245 0.28478 7.31159C-0.0949268 7.70987 -0.0949268 8.3073 0.28478 8.70558L4.17678 12.6884L3.22751 18.3639C3.22751 18.5631 3.22751 18.7622 3.32244 18.9614C3.60722 19.4592 4.17678 19.6584 4.65141 19.3597L9.49268 16.6712L14.3339 19.3597C14.4289 19.4592 14.6187 19.4592 14.8086 19.4592C14.9035 19.4592 14.9035 19.4592 14.9984 19.4592C15.4731 19.3597 15.8528 18.8618 15.7578 18.2644L14.8086 12.5888L18.7006 8.60601C18.8904 8.50644 18.9854 8.3073 18.9854 8.10816Z" fill="#FFD07A"/>
            </svg>
            <p id="userPointsProfilePage">${userInfo.score}</p>
        </div>
        <div id="myProfileSettingsContainer">
            <button id="privacyButton" class="profileSettingsButtons">
                <div id="iconAndTextContainer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="22" viewBox="0 0 20 22" fill="none">
                        <path d="M7.99986 8.58269C8.79098 8.58269 9.56432 8.34636 10.2221 7.90358C10.8799 7.4608 11.3926 6.83146 11.6953 6.09514C11.9981 5.35882 12.0773 4.5486 11.9229 3.76693C11.7686 2.98525 11.3876 2.26724 10.8282 1.70369C10.2688 1.14014 9.55612 0.756352 8.78021 0.600867C8.0043 0.445383 7.20005 0.525183 6.46916 0.830176C5.73826 1.13517 5.11356 1.65166 4.67404 2.31433C4.23452 2.97699 3.99993 3.75608 3.99993 4.55307C3.99993 5.62179 4.42135 6.64674 5.17148 7.40244C5.92162 8.15814 6.93902 8.58269 7.99986 8.58269ZM7.99986 2.13529C8.47453 2.13529 8.93854 2.27709 9.33321 2.54276C9.72788 2.80843 10.0355 3.18603 10.2171 3.62782C10.3988 4.06961 10.4463 4.55575 10.3537 5.02475C10.2611 5.49375 10.0325 5.92456 9.69689 6.26269C9.36125 6.60082 8.93362 6.8311 8.46807 6.92439C8.00253 7.01768 7.51997 6.9698 7.08144 6.7868C6.6429 6.6038 6.26808 6.29391 6.00437 5.89631C5.74066 5.49871 5.5999 5.03126 5.5999 4.55307C5.5999 3.91183 5.85276 3.29686 6.30284 2.84344C6.75292 2.39002 7.36335 2.13529 7.99986 2.13529ZM19.3917 11.8064L16.1917 11.0005C16.0656 10.9691 15.9338 10.9691 15.8077 11.0005L14.3598 11.3631C13.481 10.6021 12.3586 10.187 11.1998 10.1945H4.79992C3.5269 10.1945 2.30602 10.704 1.40586 11.6108C0.505704 12.5177 0 13.7476 0 15.0301V17.4479C0 17.6616 0.0842842 17.8666 0.234311 18.0177C0.384337 18.1689 0.587817 18.2538 0.799986 18.2538H12.1438C12.7838 20.051 15.3437 21.2599 15.6717 21.405C15.7749 21.4517 15.8867 21.4758 15.9997 21.4758C16.1128 21.4758 16.2246 21.4517 16.3277 21.405C16.7037 21.2357 19.9997 19.6883 19.9997 17.4479V12.6123C20.005 12.4282 19.9476 12.2478 19.8369 12.1012C19.7263 11.9546 19.5692 11.8505 19.3917 11.8064ZM1.59997 15.0301C1.59997 14.1751 1.93711 13.3552 2.53721 12.7506C3.13732 12.146 3.95124 11.8064 4.79992 11.8064H11.1998C11.5691 11.8129 11.9345 11.8838 12.2798 12.0159C12.194 12.0898 12.1247 12.1812 12.0764 12.2839C12.0282 12.3867 12.0021 12.4986 11.9998 12.6123V16.6419H1.59997V15.0301ZM18.3997 17.4479C18.3997 18.2538 17.0717 19.2209 15.9997 19.777C14.9277 19.2209 13.5998 18.2538 13.5998 17.4479V13.2409L15.9997 12.6123L18.3997 13.2168V17.4479Z" fill="white"/>
                    </svg>
                    <p class="privacyText">Privacy</p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="7" height="14" viewBox="0 0 7 14" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 1.35843L0.816681 0.5L7 7L0.816681 13.5L0 12.6415L5.36664 7L0 1.35843Z" fill="white"/>
                </svg>
            </button>
            <button id="settingsButton" class="profileSettingsButtons">
                <div id="iconAndTextContainer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M17.6407 10.98C17.6818 10.66 17.7127 10.34 17.7127 10C17.7127 9.66 17.6818 9.34 17.6407 9.02L19.8099 7.37C20.0052 7.22 20.0566 6.95 19.9333 6.73L17.8772 3.27C17.7538 3.05 17.4762 2.97 17.25 3.05L14.6902 4.05C14.1556 3.65 13.5799 3.32 12.9528 3.07L12.5621 0.42C12.5313 0.18 12.3154 0 12.0584 0H7.94616C7.68915 0 7.47326 0.18 7.44242 0.42L7.05176 3.07C6.42464 3.32 5.84894 3.66 5.31435 4.05L2.7545 3.05C2.51804 2.96 2.25075 3.05 2.12738 3.27L0.0712765 6.73C-0.0623704 6.95 -0.000687048 7.22 0.194643 7.37L2.36384 9.02C2.32271 9.34 2.29187 9.67 2.29187 10C2.29187 10.33 2.32271 10.66 2.36384 10.98L0.194643 12.63C-0.000687048 12.78 -0.0520898 13.05 0.0712765 13.27L2.12738 16.73C2.25075 16.95 2.52832 17.03 2.7545 16.95L5.31435 15.95C5.84894 16.35 6.42464 16.68 7.05176 16.93L7.44242 19.58C7.47326 19.82 7.68915 20 7.94616 20H12.0584C12.3154 20 12.5313 19.82 12.5621 19.58L12.9528 16.93C13.5799 16.68 14.1556 16.34 14.6902 15.95L17.25 16.95C17.4865 17.04 17.7538 16.95 17.8772 16.73L19.9333 13.27C20.0566 13.05 20.0052 12.78 19.8099 12.63L17.6407 10.98ZM10.0023 13.5C8.01813 13.5 6.40408 11.93 6.40408 10C6.40408 8.07 8.01813 6.5 10.0023 6.5C11.9864 6.5 13.6005 8.07 13.6005 10C13.6005 11.93 11.9864 13.5 10.0023 13.5Z" fill="white"/>
                    </svg>
                    <p class="settingsText">Settings</p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="7" height="14" viewBox="0 0 7 14" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 1.35843L0.816681 0.5L7 7L0.816681 13.5L0 12.6415L5.36664 7L0 1.35843Z" fill="white"/>
                </svg>
            </button>
            <button id="helpButton" class="profileSettingsButtons">
                <div id="iconAndTextContainer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M9.29 13.29C9.247 13.3375 9.20692 13.3876 9.17 13.44C9.13216 13.4957 9.10189 13.5563 9.08 13.62C9.05117 13.6767 9.03095 13.7373 9.02 13.8C9.01509 13.8666 9.01509 13.9334 9.02 14C9.01662 14.1312 9.04402 14.2613 9.1 14.38C9.14492 14.5041 9.21657 14.6168 9.30989 14.7101C9.40321 14.8034 9.51591 14.8751 9.64 14.92C9.7597 14.9729 9.88913 15.0002 10.02 15.0002C10.1509 15.0002 10.2803 14.9729 10.4 14.92C10.5241 14.8751 10.6368 14.8034 10.7301 14.7101C10.8234 14.6168 10.8951 14.5041 10.94 14.38C10.9844 14.2584 11.0048 14.1294 11 14C11.0008 13.8684 10.9755 13.7379 10.9258 13.6161C10.876 13.4943 10.8027 13.3834 10.71 13.29C10.617 13.1963 10.5064 13.1219 10.3846 13.0711C10.2627 13.0203 10.132 12.9942 10 12.9942C9.86799 12.9942 9.73729 13.0203 9.61543 13.0711C9.49357 13.1219 9.38297 13.1963 9.29 13.29ZM10 0C8.02219 0 6.08879 0.58649 4.4443 1.6853C2.79981 2.78412 1.51809 4.3459 0.761209 6.17316C0.00433282 8.00042 -0.1937 10.0111 0.192152 11.9509C0.578004 13.8907 1.53041 15.6725 2.92894 17.0711C4.32746 18.4696 6.10929 19.422 8.0491 19.8078C9.98891 20.1937 11.9996 19.9957 13.8268 19.2388C15.6541 18.4819 17.2159 17.2002 18.3147 15.5557C19.4135 13.9112 20 11.9778 20 10C20 8.68678 19.7413 7.38642 19.2388 6.17316C18.7362 4.95991 17.9997 3.85752 17.0711 2.92893C16.1425 2.00035 15.0401 1.26375 13.8268 0.761204C12.6136 0.258658 11.3132 0 10 0ZM10 18C8.41775 18 6.87103 17.5308 5.55544 16.6518C4.23985 15.7727 3.21447 14.5233 2.60897 13.0615C2.00347 11.5997 1.84504 9.99112 2.15372 8.43927C2.4624 6.88743 3.22433 5.46196 4.34315 4.34314C5.46197 3.22432 6.88743 2.4624 8.43928 2.15372C9.99113 1.84504 11.5997 2.00346 13.0615 2.60896C14.5233 3.21446 15.7727 4.23984 16.6518 5.55544C17.5308 6.87103 18 8.41775 18 10C18 12.1217 17.1571 14.1566 15.6569 15.6568C14.1566 17.1571 12.1217 18 10 18ZM10 5C9.47307 4.99966 8.95534 5.13812 8.49891 5.40144C8.04249 5.66476 7.66347 6.04366 7.4 6.5C7.32765 6.61382 7.27907 6.74109 7.25718 6.87417C7.23529 7.00725 7.24054 7.14339 7.27263 7.27438C7.30472 7.40538 7.36297 7.52853 7.44389 7.63643C7.5248 7.74433 7.62671 7.83475 7.74347 7.90224C7.86024 7.96974 7.98945 8.01291 8.12334 8.02918C8.25722 8.04544 8.39301 8.03445 8.52254 7.99687C8.65207 7.9593 8.77266 7.89591 8.87705 7.81052C8.98145 7.72513 9.06749 7.6195 9.13 7.5C9.21811 7.34739 9.34497 7.22078 9.49775 7.13298C9.65053 7.04517 9.82379 6.9993 10 7C10.2652 7 10.5196 7.10536 10.7071 7.29289C10.8946 7.48043 11 7.73478 11 8C11 8.26521 10.8946 8.51957 10.7071 8.7071C10.5196 8.89464 10.2652 9 10 9C9.73479 9 9.48043 9.10535 9.2929 9.29289C9.10536 9.48043 9 9.73478 9 10V11C9 11.2652 9.10536 11.5196 9.2929 11.7071C9.48043 11.8946 9.73479 12 10 12C10.2652 12 10.5196 11.8946 10.7071 11.7071C10.8946 11.5196 11 11.2652 11 11V10.82C11.6614 10.58 12.2174 10.1152 12.5708 9.50687C12.9242 8.89851 13.0525 8.18529 12.9334 7.49189C12.8143 6.79849 12.4552 6.16902 11.919 5.71351C11.3828 5.25801 10.7035 5.00546 10 5Z" fill="white"/>
                    </svg>
                    <p class="helpText">Help & Support</p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="7" height="14" viewBox="0 0 7 14" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 1.35843L0.816681 0.5L7 7L0.816681 13.5L0 12.6415L5.36664 7L0 1.35843Z" fill="white"/>
                </svg>
            </button>
            <button id="aboutButton" class="profileSettingsButtons">
                <div id="iconAndTextContainer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M10 0C11.9778 0 13.9112 0.58649 15.5557 1.6853C17.2002 2.78412 18.4819 4.3459 19.2388 6.17316C19.9957 8.00043 20.1937 10.0111 19.8078 11.9509C19.422 13.8907 18.4696 15.6725 17.0711 17.0711C15.6725 18.4696 13.8907 19.422 11.9509 19.8078C10.0111 20.1937 8.00042 19.9957 6.17316 19.2388C4.3459 18.4819 2.78412 17.2002 1.6853 15.5557C0.586491 13.9112 0 11.9778 0 10C0 8.68678 0.258656 7.38642 0.761204 6.17316C1.26375 4.95991 2.00035 3.85752 2.92893 2.92893C3.85752 2.00035 4.95991 1.26375 6.17316 0.761205C7.38642 0.258658 8.68678 0 10 0ZM10 18C11.5822 18 13.129 17.5308 14.4446 16.6518C15.7602 15.7727 16.7855 14.5233 17.391 13.0615C17.9965 11.5997 18.155 9.99112 17.8463 8.43928C17.5376 6.88743 16.7757 5.46197 15.6569 4.34314C14.538 3.22433 13.1126 2.4624 11.5607 2.15372C10.0089 1.84504 8.40034 2.00346 6.93853 2.60896C5.47672 3.21446 4.22729 4.23984 3.34824 5.55544C2.46919 6.87103 2 8.41775 2 10C2 12.1217 2.84285 14.1566 4.34314 15.6569C5.84343 17.1571 7.87827 18 10 18Z" fill="white"/>
                        <path d="M10 7C9.44772 7 9 6.55228 9 6C9 5.44772 9.44772 5 10 5C10.5523 5 11 5.44772 11 6C11 6.55228 10.5523 7 10 7Z" fill="white"/>
                        <path d="M10 8C10.2652 8 10.5196 8.10536 10.7071 8.29289C10.8946 8.48043 11 8.73478 11 9V14C11 14.2652 10.8946 14.5196 10.7071 14.7071C10.5196 14.8946 10.2652 15 10 15C9.73478 15 9.48043 14.8946 9.29289 14.7071C9.10536 14.5196 9 14.2652 9 14V9C9 8.73478 9.10536 8.48043 9.29289 8.29289C9.48043 8.10536 9.73478 8 10 8Z" fill="white"/>
                    </svg>
                    <p class="aboutText">About</p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="7" height="14" viewBox="0 0 7 14" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 1.35843L0.816681 0.5L7 7L0.816681 13.5L0 12.6415L5.36664 7L0 1.35843Z" fill="white"/>
                </svg>
            </button>
            <button id="signOutButton" class="profileSettingsButtons">
                <div id="iconAndTextContainer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M2.12676 20C1.53245 20 1.02941 19.7941 0.617647 19.3824C0.205882 18.9706 0 18.4676 0 17.8732V2.12676C0 1.53245 0.205882 1.02941 0.617647 0.617647C1.02941 0.205882 1.53245 0 2.12676 0H10.0112V1.76471H2.12676C2.03618 1.76471 1.95324 1.80245 1.87794 1.87794C1.80245 1.95323 1.76471 2.03618 1.76471 2.12676V17.8732C1.76471 17.9638 1.80245 18.0468 1.87794 18.1221C1.95324 18.1975 2.03618 18.2353 2.12676 18.2353H10.0112V20H2.12676ZM14.9774 15.0226L13.7556 13.7465L16.62 10.8824H6.58382V9.11765H16.62L13.7556 6.25353L14.9774 4.97735L20 10L14.9774 15.0226Z" fill="white"/>
                    </svg>
                    <p class="signOutText">Sign Out</p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="7" height="14" viewBox="0 0 7 14" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 1.35843L0.816681 0.5L7 7L0.816681 13.5L0 12.6415L5.36664 7L0 1.35843Z" fill="white"/>
                </svg>
            </button>
        </div>
    </div>
    `;

    parent.appendChild(myProfileContentContainer);

    document.getElementById("signOutButton").addEventListener("click", () => {
        localStorage.clear();
        render_login(document.querySelector("#wrapper"));
    });
}

renderProfilePageContainer("wrapper");